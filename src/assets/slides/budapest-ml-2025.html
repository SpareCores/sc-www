<!DOCTYPE html>
<html lang="en"><head>
<script src="budapest-ml-2025_files/libs/quarto-html/tabby.min.js"></script>
<script src="budapest-ml-2025_files/libs/quarto-html/popper.min.js"></script>
<script src="budapest-ml-2025_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="budapest-ml-2025_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="budapest-ml-2025_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="budapest-ml-2025_files/libs/quarto-html/quarto-syntax-highlighting-dark-8ef56b68f8fa1e9d2ba328e99e439f80.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.31">

  <meta name="author" content="Gergely Daroczi">
  <meta name="dcterms.date" content="2025-06-18">
  <title>Resource Monitoring and Cloud Optimization for Data Science Tasks with Metaflow</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="budapest-ml-2025_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="budapest-ml-2025_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="budapest-ml-2025_files/libs/revealjs/dist/theme/quarto-37058a40523fadd3eb6582a1eaaf1bef.css">
  <link href="budapest-ml-2025_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="budapest-ml-2025_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="budapest-ml-2025_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="budapest-ml-2025_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="budapest-ml-2025_files/libs/quarto-diagram/mermaid.min.js"></script>
  <script src="budapest-ml-2025_files/libs/quarto-diagram/mermaid-init.js"></script>
  <link href="budapest-ml-2025_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block">
  <h1 class="title">Resource Monitoring and Cloud Optimization for Data Science Tasks with Metaflow</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Gergely Daroczi 
</div>
</div>
</div>

  <p class="date">2025-06-18</p>
</section>
<section id="cover-slide" class="title-slide slide level1">
<h1></h1>
<script>
  // add custom CSS for the speaker view
  if (window.self !== window.top) {
    document.body.className += " speakerview";
  }
  // remove dummy slide
  document.getElementById("title-slide").remove();
</script>
<div class="centered">
<p><img src="images/budapest-data-ml-forum-logo-transparent.png" class="toplogo" style="width: 464px; margin-left: -232px; margin-right: 232px;background-color:transparent;"></p>
</div>
<h1 class="subtitle" style="color:#eee;font-size:1.25em;text-align: center; margin-top:325px; color:#34d399;">
Resource Monitoring and Cloud Optimization<br>for Data Science Tasks with Metaflow
</h1>
<h2 class="author" style="color:#eee;padding-top:15px;font-size:1.25em;text-align: center !important;margin-bottom: 0px;">
Gergely Dar√≥czi
</h2>
<h3 class="author" style="color:#eee;font-size:1.1em;text-align: center !important; font-weight: normal;">
Spare Cores Team
</h3>
<h3 class="author onlineMode" style="color:#eee;padding-top:25px;font-size:1.1em;text-align: center !important; padding-top: 10px;font-weight: normal; ">
Slides: <a href="https://sparecores.com/talks" target="_blank">sparecores.com/talks</a>
</h3>
<p class="author offlineMode" style="color:#eee;font-size:0.75em;text-align: right !important; padding-top: 10px;font-weight: normal;margin-top:30px; ">
Press Space or click the green arrow icons to navigate the slides -&gt;
</p>
<aside class="notes">
<p>TODO</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section id="badges" class="title-slide slide level1" data-transition="convex-in convex-out">
<h1>&gt;&gt;&gt; from sparecores import badges</h1>
<ul style="font-size: 0.9em;">
<li class="fragment" data-fragment-index="1">
Funded by NGI Search (EU consortium under Horizon Europe)
</li>
<ul>
<li class="fragment" data-fragment-index="2">
Vendor independent, open-source project
</li>
</ul>
<li class="fragment" data-fragment-index="3">
Accepted into the NVIDIA Inception Program
</li>
<li class="fragment" data-fragment-index="4">
Beneficiary of cloud credits from 5 vendors (overall ~$100k)
</li>
<li class="fragment" data-fragment-index="5">
10 conference talks in 5 countries (e.g.&nbsp;Berlin Buzzwords, KCD)
</li>
<li class="fragment" data-fragment-index="6">
Featured by The Pragmatic Engineer in Oct 2024
</li>
<li class="fragment" data-fragment-index="7">
Jeff Barr (Chief Evangelist at AWS) on our Reddit post:
</li>
</ul>
<blockquote class="fragment" data-fragment-index="7" style="margin-left: 40px;">
This was awesome, thanks for sharing.
</blockquote>
<aside class="notes">
<p>first of all, just to build some credibility for the project</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section>
<section id="intro" class="title-slide slide level1" data-transition="convex-in slide-out">
<h1>&gt;&gt;&gt; from sparecores import intro</h1>
<ul style="font-size: 0.9em;">
<li class="fragment">
Open-source tools, database schemas and documentation to inspect and inventory cloud vendors and their offerings, including pricing and measured performance.
</li>
<li class="fragment">
Managed infrastructure, databases, APIs, SDKs, and web applications to make this data publicly accessible.
</li>
<li class="fragment">
Helpers to select, start and manage instances in your own environment.
</li>
<li class="fragment">
Add-on services to scale data science workflows, even without direct vendor engagement.
</li>
</ul>
<aside class="notes">
<ul>
<li>so Spare Cores is an open-source ecosystem, including software, database schemas, guides,</li>
<li>and actual databases if you don‚Äôt want to run the ETL tooling yourself .. also providing APIs, SDKs etc to make it easier to query data</li>
<li>unified CLI to start machines</li>
<li>and working on an an optional SaaS offering built on the top of the open-source tooling for folks who would rather avoid registering with all cloud providers etc: give us a Docker image, a command to run, and you credit card .. all set, we will run it wherever it‚Äôs cheapest.</li>
</ul>
<p>We help DevOps, DS, ML, AI, ETL, AV, and other engineering teams to find optimal instances for their batch jobs (e.g.&nbsp;‚Äú8 CPU cores, 64 GB of RAM, and a TPU needed in an EU datacenter to train ML models for 6 hours‚Äù) by providing:</p>
<ul>
<li>Open-source tools, database schemas and documentation to monitor cloud and flexible VPS/dedicated server vendors and their compute resource offerings in an innovative and truly comparative way, including vendor details (e.g.&nbsp;location, certificates, green power), compute capabilities (e.g.&nbsp;CPU, memory, GPU/TPU), pricing (especially of spot instances), and performance (by running task-specific benchmarks).</li>
<li>Managed infrastructure, databases, APIs, SDKs, and web applications to make these continuously and transparently tracked data sources publicly available and comparable in a validated, unbiased, structured, and searchable manner.</li>
<li>Helpers to easily start and manage instances at all the supported vendors with a standardized API.</li>
<li>SaaS</li>
</ul>
<p>BUT let‚Äôs focus on the open-source and open-data components ..</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-sparecores-import-intro" class="slide level2">
<h2>&gt;&gt;&gt; from sparecores import intro</h2>

<img style="width:100%;" src="images/homepage-stats-2025q1.png" class="r-stretch"><p class="centered" style="margin-top: -10px;">
Source: <a href="https://sparecores.com">sparecores.com</a>
</p>
<aside class="notes">
<p>TODO</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-sparecores-import-intro-1" class="slide level2">
<h2>&gt;&gt;&gt; from sparecores import intro</h2>
<div class="centered">
<p><img style="width:95%;" src="images/sc-www-listing-top-2025q1.png"></p>
</div>
<aside class="notes">
<p>The easiest way to query this data is through our web component, as you can see on the screen ‚Ä¶</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-sparecores-import-intro-2" class="slide level2">
<h2>&gt;&gt;&gt; from sparecores import intro</h2>
<div class="centered">
<p><img style="width: 90%;" src="images/sc-www-server-details-top-g2-standard-16.png"></p>
</div>
<aside class="notes">
<p>Clicking on a server shows you the technical details of the instance ‚Äì much more than what‚Äôs provided publicly by the vendor, even more than what ChatGPT knows ‚Ä¶ as we actually start each machine and inspect the hardware. More on that later.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-sparecores-import-intro-3" class="slide level2">
<h2>&gt;&gt;&gt; from sparecores import intro</h2>
<div class="centered">
<p><img style="width: 80%;" src="images/sc-www-server-details-prices-g2-standard-16.png"></p>
</div>
<aside class="notes">
<p>Live and historical pricing</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-sparecores-import-intro-4" class="slide level2">
<h2>&gt;&gt;&gt; from sparecores import intro</h2>
<!-- https://sparecores.com/server/aws/c5d.2xlarge -->
<div class="centered">
<p><img style="width: 80%;" src="images/sc-www-server-details-benchmarks-1-g2-standard-16.png"></p>
</div>
<aside class="notes">
<p>and we also run benchmark scenarios on the servers, e.g.:</p>
<ul>
<li>memory bandwidth of read, write and mixed operations using various block sizes and also including the related L1/L2/L3 cache amounts</li>
<li>or benchmarking compression algos - having the compression ratio on the x axis, and the bandwidth on the y axis, it‚Äôs clear that <code>zpaq</code> is a beast when it comes to compressing text, but might be slow on this machine</li>
<li>OpenSSL hash functions and block ciphers</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-sparecores-import-intro-5" class="slide level2">
<h2>&gt;&gt;&gt; from sparecores import intro</h2>

<img src="images/sc-www-server-details-benchmarks-2-g2-standard-16.png" class="r-stretch"><aside class="notes">
<p>also running test suites like PassMark or ‚Ä¶</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-sparecores-import-intro-6" class="slide level2">
<h2>&gt;&gt;&gt; from sparecores import intro</h2>

<img src="images/sc-www-server-details-benchmarks-3-g2-standard-16.png" class="r-stretch"><aside class="notes">
<p>Geekbench 6, which has been a standard tool for some time including workloads for text and image processing, compiling software etc</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-sparecores-import-intro-7" class="slide level2">
<h2>&gt;&gt;&gt; from sparecores import intro</h2>

<img src="images/sc-www-server-details-benchmarks-4-g2-standard-16.png" class="r-stretch"><aside class="notes">
<p>visualizations on how well the machine can scale tasks to multiple CPU cores ‚Äì e.g.&nbsp;showing the diminishing return on this Intel Xeon due to hyperthreading</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-sparecores-import-intro-8" class="slide level2">
<h2>&gt;&gt;&gt; from sparecores import intro</h2>

<img src="images/sc-www-server-details-benchmarks-5-g2-standard-16.png" class="r-stretch"><aside class="notes">
<p>Or looking at LLM Inference Speed that is the main topic for today .. I‚Äôll revisit later</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-sparecores-import-intro-9" class="slide level2">
<h2>&gt;&gt;&gt; from sparecores import intro</h2>

<img src="images/sc-www-server-details-benchmarks-6-g2-standard-16.png" class="r-stretch"><aside class="notes">
<p>and other application-specific benchmarks, like serving a static website or running a key-value store database</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-sparecores-import-intro-10" class="slide level2">
<h2>&gt;&gt;&gt; from sparecores import intro</h2>
<div class="centered">
<p><img style="width: 83%;" src="images/sc-www-server-compare.png"></p>
</div>
<!-- https://sparecores.com/compare?instances=W3sidmVuZG9yIjoiYXdzIiwic2VydmVyIjoiYzVhZC4xMnhsYXJnZSJ9LHsidmVuZG9yIjoiYXdzIiwic2VydmVyIjoiYzVkLjJ4bGFyZ2UifSx7InZlbmRvciI6ImF3cyIsInNlcnZlciI6ImM2Zy4xNnhsYXJnZSJ9LHsidmVuZG9yIjoiaGNsb3VkIiwic2VydmVyIjoiY2N4MzMifV0%3D -->
<aside class="notes">
<p>and making all these data available in comparison tables</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-sparecores-import-intro-11" class="slide level2">
<h2>&gt;&gt;&gt; from sparecores import intro</h2>
<div class="centered">
<p><img style="width: 75%;" src="images/sc-www-server-compare-charts.png"></p>
</div>
<aside class="notes">
<p>or plots as well for human inspection</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-sparecores-import-intro-12" class="slide level2">
<h2>&gt;&gt;&gt; from sparecores import intro</h2>
<div class="centered">
<p><img style="width:95%;" src="images/sc-keeper-preview.png"></p>
</div>
<aside class="notes">
<p>for computers, we provide APIs ‚Ä¶</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-sparecores-import-intro-13" class="slide level2">
<h2>&gt;&gt;&gt; from sparecores import intro</h2>
<div class="sourceCode" id="cb1" style="margin-top: 20px !important; height: 640px;"><pre class="sourceCode py"><code class="sourceCode python"><span id="cb1-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> rich <span class="im">import</span> <span class="bu">print</span> <span class="im">as</span> pp</span>
<span id="cb1-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> sc_crawler.tables <span class="im">import</span> Server</span>
<span id="cb1-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> sqlmodel <span class="im">import</span> create_engine, Session, select</span>
<span id="cb1-4"><a href="" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> engine <span class="op">=</span> create_engine(<span class="st">"sqlite:///sc-data-all.db"</span>)</span>
<span id="cb1-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> session <span class="op">=</span> Session(engine)</span>
<span id="cb1-6"><a href="" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> server <span class="op">=</span> session.<span class="bu">exec</span>(select(Server).where(Server.server_id <span class="op">==</span> <span class="st">'g4dn.xlarge'</span>)).one()</span>
<span id="cb1-7"><a href="" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> pp(server)</span>
<span id="cb1-8"><a href="" aria-hidden="true" tabindex="-1"></a>Server(</span>
<span id="cb1-9"><a href="" aria-hidden="true" tabindex="-1"></a>    server_id<span class="op">=</span><span class="st">'g4dn.xlarge'</span>,</span>
<span id="cb1-10"><a href="" aria-hidden="true" tabindex="-1"></a>    vendor_id<span class="op">=</span><span class="st">'aws'</span>,</span>
<span id="cb1-11"><a href="" aria-hidden="true" tabindex="-1"></a>    display_name<span class="op">=</span><span class="st">'g4dn.xlarge'</span>,</span>
<span id="cb1-12"><a href="" aria-hidden="true" tabindex="-1"></a>    api_reference<span class="op">=</span><span class="st">'g4dn.xlarge'</span>,</span>
<span id="cb1-13"><a href="" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">'g4dn.xlarge'</span>,</span>
<span id="cb1-14"><a href="" aria-hidden="true" tabindex="-1"></a>    family<span class="op">=</span><span class="st">'g4dn'</span>,</span>
<span id="cb1-15"><a href="" aria-hidden="true" tabindex="-1"></a>    description<span class="op">=</span><span class="st">'Graphics intensive [Instance store volumes] [Network and EBS optimized] Gen4 xlarge'</span>,</span>
<span id="cb1-16"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="" aria-hidden="true" tabindex="-1"></a>    status<span class="op">=&lt;</span>Status.ACTIVE: <span class="st">'active'</span><span class="op">&gt;</span>,</span>
<span id="cb1-18"><a href="" aria-hidden="true" tabindex="-1"></a>    observed_at<span class="op">=</span>datetime.datetime(<span class="dv">2024</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">10</span>, <span class="dv">18</span>, <span class="dv">4</span>, <span class="dv">127254</span>),</span>
<span id="cb1-19"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="" aria-hidden="true" tabindex="-1"></a>    hypervisor<span class="op">=</span><span class="st">'nitro'</span>,</span>
<span id="cb1-21"><a href="" aria-hidden="true" tabindex="-1"></a>    vcpus<span class="op">=</span><span class="dv">4</span>,</span>
<span id="cb1-22"><a href="" aria-hidden="true" tabindex="-1"></a>    cpu_cores<span class="op">=</span><span class="dv">2</span>,</span>
<span id="cb1-23"><a href="" aria-hidden="true" tabindex="-1"></a>    cpu_allocation<span class="op">=&lt;</span>CpuAllocation.DEDICATED: <span class="st">'Dedicated'</span><span class="op">&gt;</span>,</span>
<span id="cb1-24"><a href="" aria-hidden="true" tabindex="-1"></a>    cpu_manufacturer<span class="op">=</span><span class="st">'Intel'</span>,</span>
<span id="cb1-25"><a href="" aria-hidden="true" tabindex="-1"></a>    cpu_family<span class="op">=</span><span class="st">'Xeon'</span>,</span>
<span id="cb1-26"><a href="" aria-hidden="true" tabindex="-1"></a>    cpu_model<span class="op">=</span><span class="st">'8259CL'</span>,</span>
<span id="cb1-27"><a href="" aria-hidden="true" tabindex="-1"></a>    cpu_architecture<span class="op">=&lt;</span>CpuArchitecture.X86_64: <span class="st">'x86_64'</span><span class="op">&gt;</span>,</span>
<span id="cb1-28"><a href="" aria-hidden="true" tabindex="-1"></a>    cpu_speed<span class="op">=</span><span class="fl">3.5</span>,</span>
<span id="cb1-29"><a href="" aria-hidden="true" tabindex="-1"></a>    cpu_l1_cache<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb1-30"><a href="" aria-hidden="true" tabindex="-1"></a>    cpu_l2_cache<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb1-31"><a href="" aria-hidden="true" tabindex="-1"></a>    cpu_l3_cache<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb1-32"><a href="" aria-hidden="true" tabindex="-1"></a>    cpu_flags<span class="op">=</span>[],</span>
<span id="cb1-33"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-34"><a href="" aria-hidden="true" tabindex="-1"></a>    memory_amount<span class="op">=</span><span class="dv">16384</span>,</span>
<span id="cb1-35"><a href="" aria-hidden="true" tabindex="-1"></a>    memory_generation<span class="op">=&lt;</span>DdrGeneration.DDR4: <span class="st">'DDR4'</span><span class="op">&gt;</span>,</span>
<span id="cb1-36"><a href="" aria-hidden="true" tabindex="-1"></a>    memory_speed<span class="op">=</span><span class="dv">3200</span>,</span>
<span id="cb1-37"><a href="" aria-hidden="true" tabindex="-1"></a>    memory_ecc<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb1-38"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="" aria-hidden="true" tabindex="-1"></a>    gpu_count<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb1-40"><a href="" aria-hidden="true" tabindex="-1"></a>    gpu_memory_min<span class="op">=</span><span class="dv">16384</span>,</span>
<span id="cb1-41"><a href="" aria-hidden="true" tabindex="-1"></a>    gpu_memory_total<span class="op">=</span><span class="dv">16384</span>,</span>
<span id="cb1-42"><a href="" aria-hidden="true" tabindex="-1"></a>    gpu_manufacturer<span class="op">=</span><span class="st">'Nvidia'</span>,</span>
<span id="cb1-43"><a href="" aria-hidden="true" tabindex="-1"></a>    gpu_family<span class="op">=</span><span class="st">'Turing'</span>,</span>
<span id="cb1-44"><a href="" aria-hidden="true" tabindex="-1"></a>    gpu_model<span class="op">=</span><span class="st">'Tesla T4'</span>,</span>
<span id="cb1-45"><a href="" aria-hidden="true" tabindex="-1"></a>    gpus<span class="op">=</span>[</span>
<span id="cb1-46"><a href="" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb1-47"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="st">'manufacturer'</span>: <span class="st">'Nvidia'</span>,</span>
<span id="cb1-48"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="st">'family'</span>: <span class="st">'Turing'</span>,</span>
<span id="cb1-49"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="st">'model'</span>: <span class="st">'Tesla T4'</span>,</span>
<span id="cb1-50"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="st">'memory'</span>: <span class="dv">15360</span>,</span>
<span id="cb1-51"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="st">'firmware_version'</span>: <span class="st">'535.171.04'</span>,</span>
<span id="cb1-52"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="st">'bios_version'</span>: <span class="st">'90.04.96.00.A0'</span>,</span>
<span id="cb1-53"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="st">'graphics_clock'</span>: <span class="dv">1590</span>,</span>
<span id="cb1-54"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="st">'sm_clock'</span>: <span class="dv">1590</span>,</span>
<span id="cb1-55"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="st">'mem_clock'</span>: <span class="dv">5001</span>,</span>
<span id="cb1-56"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="st">'video_clock'</span>: <span class="dv">1470</span></span>
<span id="cb1-57"><a href="" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb1-58"><a href="" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb1-59"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-60"><a href="" aria-hidden="true" tabindex="-1"></a>    storage_size<span class="op">=</span><span class="dv">125</span>,</span>
<span id="cb1-61"><a href="" aria-hidden="true" tabindex="-1"></a>    storage_type<span class="op">=&lt;</span>StorageType.NVME_SSD: <span class="st">'nvme ssd'</span><span class="op">&gt;</span>,</span>
<span id="cb1-62"><a href="" aria-hidden="true" tabindex="-1"></a>    storages<span class="op">=</span>[{<span class="st">'size'</span>: <span class="dv">125</span>, <span class="st">'storage_type'</span>: <span class="st">'nvme ssd'</span>}],</span>
<span id="cb1-63"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-64"><a href="" aria-hidden="true" tabindex="-1"></a>    network_speed<span class="op">=</span><span class="fl">5.0</span>,</span>
<span id="cb1-65"><a href="" aria-hidden="true" tabindex="-1"></a>    inbound_traffic<span class="op">=</span><span class="fl">0.0</span>,</span>
<span id="cb1-66"><a href="" aria-hidden="true" tabindex="-1"></a>    outbound_traffic<span class="op">=</span><span class="fl">0.0</span>,</span>
<span id="cb1-67"><a href="" aria-hidden="true" tabindex="-1"></a>    ipv4<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb1-68"><a href="" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<aside class="notes">
<p>and SDKs as well, e.g.&nbsp;querying the details of this instance type: SCROLL through!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section id="components" class="title-slide slide level1" data-transition="convex-in convex-out">
<h1>&gt;&gt;&gt; from sparecores import components</h1>

<img style="margin-top:30px; width: 100%;" src="images/sc-components.png" class="r-stretch"><aside class="notes">
<p>As mentioned previously, this is made available via multiple components that I‚Äôd like to walk through in the next slides.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section>
<section id="metaflow" class="title-slide slide level1" data-transition="convex-in slide-out">
<h1>&gt;&gt;&gt; import <img class="h1-inline-img sc-recolor" src="images/metaflow.svg"></h1>
<p class="fragment">
Workflow orchestration for real-life ML, AI, and DS projects.
</p>
<ul>
<li class="fragment">
started at Netflix
</li>
<li class="fragment">
open-source (since 2019)
</li>
<li class="fragment">
maintained by Netflix and Outerbounds
</li>
<li class="fragment">
human-centric
</li>
<li class="fragment">
reproducible by design
</li>
<li class="fragment">
scalable
</li>
<li class="fragment">
supports Python and R
</li>
</ul>
<aside class="notes">
<p>TODO</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-metaflow-import-tutorial" class="slide level2" data-transition="slide-in fade-out">
<h2>&gt;&gt;&gt; from metaflow import tutorial</h2>
<div class="sourceCode" id="cb2" style="font-size:32px;margin-top: 40px !important; height: 515px;" data-code-line-numbers="|1|3|5,10,15|4,9,14|7,12|6,11,16|19"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb2-1"><a href=""></a><span class="im">from</span> metaflow <span class="im">import</span> FlowSpec, step</span>
<span id="cb2-2"><a href=""></a></span>
<span id="cb2-3"><a href=""></a><span class="kw">class</span> HelloFlow(FlowSpec):</span>
<span id="cb2-4"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb2-5"><a href=""></a>    <span class="kw">def</span> start(<span class="va">self</span>):</span>
<span id="cb2-6"><a href=""></a>        <span class="bu">print</span>(<span class="st">"HelloFlow is starting."</span>)</span>
<span id="cb2-7"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.hello)</span>
<span id="cb2-8"><a href=""></a></span>
<span id="cb2-9"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb2-10"><a href=""></a>    <span class="kw">def</span> hello(<span class="va">self</span>):</span>
<span id="cb2-11"><a href=""></a>        <span class="bu">print</span>(<span class="st">"Metaflow says: Hi!"</span>)</span>
<span id="cb2-12"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.end)</span>
<span id="cb2-13"><a href=""></a></span>
<span id="cb2-14"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb2-15"><a href=""></a>    <span class="kw">def</span> end(<span class="va">self</span>):</span>
<span id="cb2-16"><a href=""></a>        <span class="bu">print</span>(<span class="st">"HelloFlow is all done."</span>)</span>
<span id="cb2-17"><a href=""></a></span>
<span id="cb2-18"><a href=""></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb2-19"><a href=""></a>    HelloFlow()</span></code></pre></div>
<aside class="notes">
<p>By design, Metaflow is a deceptively simple Python library</p>
<p>DAG</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-metaflow-import-tutorial-1" class="slide level2" data-transition="fade-in slide-out">
<h2>&gt;&gt;&gt; from metaflow import tutorial</h2>
<div class="columns" style="display: block; margin-top: 40px;">
<div class="column vcenter centered" style="width:30%;">
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    A[start] --&gt; B(hello)
    B --&gt; C[end]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div><div class="column vcenter" style="width:70%;">
<div class="sourceCode" id="cb3" style="font-size:24px;" data-code-line-numbers="5,10,15"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb3-1"><a href=""></a><span class="im">from</span> metaflow <span class="im">import</span> FlowSpec, step</span>
<span id="cb3-2"><a href=""></a></span>
<span id="cb3-3"><a href=""></a><span class="kw">class</span> HelloFlow(FlowSpec):</span>
<span id="cb3-4"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb3-5"><a href=""></a>    <span class="kw">def</span> start(<span class="va">self</span>):</span>
<span id="cb3-6"><a href=""></a>        <span class="bu">print</span>(<span class="st">"HelloFlow is starting."</span>)</span>
<span id="cb3-7"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.hello)</span>
<span id="cb3-8"><a href=""></a></span>
<span id="cb3-9"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb3-10"><a href=""></a>    <span class="kw">def</span> hello(<span class="va">self</span>):</span>
<span id="cb3-11"><a href=""></a>        <span class="bu">print</span>(<span class="st">"Metaflow says: Hi!"</span>)</span>
<span id="cb3-12"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.end)</span>
<span id="cb3-13"><a href=""></a></span>
<span id="cb3-14"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb3-15"><a href=""></a>    <span class="kw">def</span> end(<span class="va">self</span>):</span>
<span id="cb3-16"><a href=""></a>        <span class="bu">print</span>(<span class="st">"HelloFlow is all done."</span>)</span>
<span id="cb3-17"><a href=""></a></span>
<span id="cb3-18"><a href=""></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb3-19"><a href=""></a>    HelloFlow()</span></code></pre></div>
</div></div>
<aside class="notes">
<p>By design, Metaflow is a deceptively simple Python library</p>
<p>DAG</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-dnd-import-dices" class="slide level2" data-transition="slide">
<h2>&gt;&gt;&gt; from DnD import dices</h2>

<img src="images/robot-dice.jpeg" style="border-radius: 25px; box-shadow: #06263a 20px 19px 25px 25px;" class="r-stretch"></section>
<section id="from-metaflow-import-dices" class="slide level2" data-transition="slide-in fade-out">
<h2>&gt;&gt;&gt; from metaflow import dices</h2>
<div class="columns" style="display: block; margin-top: 20px;">
<div class="column centered vcenter" style="width: 30%; visibility: hidden;">
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    A[start] -. dice &lt;br&gt; rolls .-&gt; B(roll)
    B -. dice &lt;br&gt; rolls &lt;br&gt; dices ..-&gt; C[end]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div><div class="column vcenter" style="width:70%;">
<div class="sourceCode" id="cb4" style="font-size:24px;" data-code-line-numbers="6-7|11-12,17|10,16,21|11-12,17"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb4-1"><a href=""></a><span class="im">from</span> random <span class="im">import</span> sample, randint</span>
<span id="cb4-2"><a href=""></a><span class="im">from</span> metaflow <span class="im">import</span> FlowSpec, step</span>
<span id="cb4-3"><a href=""></a></span>
<span id="cb4-4"><a href=""></a></span>
<span id="cb4-5"><a href=""></a><span class="kw">class</span> DiceRollFlow(FlowSpec):</span>
<span id="cb4-6"><a href=""></a>    <span class="co"># D3, D4, D6, D8, D10, D12, ...</span></span>
<span id="cb4-7"><a href=""></a>    DICES <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">100</span>]</span>
<span id="cb4-8"><a href=""></a></span>
<span id="cb4-9"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb4-10"><a href=""></a>    <span class="kw">def</span> start(<span class="va">self</span>):</span>
<span id="cb4-11"><a href=""></a>        <span class="va">self</span>.dice <span class="op">=</span> sample(<span class="va">self</span>.DICES, <span class="dv">1</span>)[<span class="dv">0</span>]</span>
<span id="cb4-12"><a href=""></a>        <span class="va">self</span>.rolls <span class="op">=</span> sample(<span class="bu">range</span>(<span class="dv">3</span>), <span class="dv">1</span>)[<span class="dv">0</span>] <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb4-13"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.roll)</span>
<span id="cb4-14"><a href=""></a></span>
<span id="cb4-15"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb4-16"><a href=""></a>    <span class="kw">def</span> roll(<span class="va">self</span>):</span>
<span id="cb4-17"><a href=""></a>        <span class="va">self</span>.dices <span class="op">=</span> [randint(<span class="dv">1</span>, <span class="va">self</span>.dice) <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(<span class="va">self</span>.rolls)]</span>
<span id="cb4-18"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.end)</span>
<span id="cb4-19"><a href=""></a></span>
<span id="cb4-20"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb4-21"><a href=""></a>    <span class="kw">def</span> end(<span class="va">self</span>):</span>
<span id="cb4-22"><a href=""></a>        <span class="bu">print</span>(<span class="ss">f"Rolled </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>rolls<span class="sc">}</span><span class="ss"> times with a </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>dice<span class="sc">}</span><span class="ss"> sided dice: </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>dices<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb4-23"><a href=""></a></span>
<span id="cb4-24"><a href=""></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb4-25"><a href=""></a>    DiceRollFlow()</span></code></pre></div>
</div></div>
<aside class="notes">
<p>By design, Metaflow is a deceptively simple Python library</p>
<p>DAG</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-metaflow-import-dices-1" class="slide level2" data-transition="fade-in slide-out">
<h2>&gt;&gt;&gt; from metaflow import dices</h2>
<div class="columns" style="display: block; margin-top: 20px;">
<div class="column centered vcenter" style="width:30%;">
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    A[start] -. dice &lt;br&gt; rolls .-&gt; B(roll)
    B -. dice &lt;br&gt; rolls &lt;br&gt; dices ..-&gt; C[end]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div><div class="column vcenter" style="width:70%;">
<div class="sourceCode" id="cb5" style="font-size:24px;" data-code-line-numbers="11-12,17"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb5-1"><a href=""></a><span class="im">from</span> random <span class="im">import</span> sample, randint</span>
<span id="cb5-2"><a href=""></a><span class="im">from</span> metaflow <span class="im">import</span> FlowSpec, step</span>
<span id="cb5-3"><a href=""></a></span>
<span id="cb5-4"><a href=""></a></span>
<span id="cb5-5"><a href=""></a><span class="kw">class</span> DiceRollFlow(FlowSpec):</span>
<span id="cb5-6"><a href=""></a>    <span class="co"># D3, D4, D6, D8, D10, D12, ...</span></span>
<span id="cb5-7"><a href=""></a>    DICES <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">100</span>]</span>
<span id="cb5-8"><a href=""></a></span>
<span id="cb5-9"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb5-10"><a href=""></a>    <span class="kw">def</span> start(<span class="va">self</span>):</span>
<span id="cb5-11"><a href=""></a>        <span class="va">self</span>.dice <span class="op">=</span> sample(<span class="va">self</span>.DICES, <span class="dv">1</span>)[<span class="dv">0</span>]</span>
<span id="cb5-12"><a href=""></a>        <span class="va">self</span>.rolls <span class="op">=</span> sample(<span class="bu">range</span>(<span class="dv">3</span>), <span class="dv">1</span>)[<span class="dv">0</span>] <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb5-13"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.roll)</span>
<span id="cb5-14"><a href=""></a></span>
<span id="cb5-15"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb5-16"><a href=""></a>    <span class="kw">def</span> roll(<span class="va">self</span>):</span>
<span id="cb5-17"><a href=""></a>        <span class="va">self</span>.dices <span class="op">=</span> [randint(<span class="dv">1</span>, <span class="va">self</span>.dice) <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(<span class="va">self</span>.rolls)]</span>
<span id="cb5-18"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.end)</span>
<span id="cb5-19"><a href=""></a></span>
<span id="cb5-20"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb5-21"><a href=""></a>    <span class="kw">def</span> end(<span class="va">self</span>):</span>
<span id="cb5-22"><a href=""></a>        <span class="bu">print</span>(<span class="ss">f"Rolled </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>rolls<span class="sc">}</span><span class="ss"> times with a </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>dice<span class="sc">}</span><span class="ss"> sided dice: </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>dices<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-23"><a href=""></a></span>
<span id="cb5-24"><a href=""></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb5-25"><a href=""></a>    DiceRollFlow()</span></code></pre></div>
</div></div>
<aside class="notes">
<p>By design, Metaflow is a deceptively simple Python library</p>
<p>DAG</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-metaflow-import-dices-2" class="slide level2">
<h2>&gt;&gt;&gt; from metaflow import dices</h2>
<div style="margin-top: 40px; background-color: #2E3436; padding: 10px 0px 0px 30px; border-radius: 20px; border: 1px solid #34d399;">
<div style="float: right; margin-right: 40px;">
<div class="terminal-buttons terminal-close" style="top: -20px;">

</div>
<div class="terminal-buttons terminal-minimize" style="top: -20px;">

</div>
<div class="terminal-buttons terminal-zoom" style="top: -20px;">

</div>
</div>
<p><img src="images/metaflow-run-dices.png" style="width: 100%; margin-top: -30px;"></p>
</div>
</section>
<section id="from-metaflow-import-dices-3" class="slide level2">
<h2>&gt;&gt;&gt; from metaflow import dices</h2>
<div class="sourceCode" id="cb6" style="margin-top: 40px !important; height: 610px;" data-code-line-numbers="1-3|4-5|6-9|10-11|12-14|15-16|17-18"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb6-1"><a href=""></a><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> metaflow <span class="im">import</span> Flow</span>
<span id="cb6-2"><a href=""></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(run <span class="op">:=</span> Flow(<span class="st">"DiceRollFlow"</span>).latest_successful_run)</span>
<span id="cb6-3"><a href=""></a>Run(<span class="st">'DiceRollFlow/1749762602890590'</span>)</span>
<span id="cb6-4"><a href=""></a><span class="op">&gt;&gt;&gt;</span> run.created_at</span>
<span id="cb6-5"><a href=""></a>datetime.datetime(<span class="dv">2025</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">23</span>, <span class="dv">10</span>, <span class="dv">2</span>, <span class="dv">891000</span>)</span>
<span id="cb6-6"><a href=""></a><span class="op">&gt;&gt;&gt;</span> run.data</span>
<span id="cb6-7"><a href=""></a><span class="op">&lt;</span>MetaflowData: dices, rolls, name, dice<span class="op">&gt;</span></span>
<span id="cb6-8"><a href=""></a><span class="op">&gt;&gt;&gt;</span> run.data.dices</span>
<span id="cb6-9"><a href=""></a>[<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">2</span>]</span>
<span id="cb6-10"><a href=""></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">list</span>(run.steps())</span>
<span id="cb6-11"><a href=""></a>[Step(<span class="st">'DiceRollFlow/1749762602890590/end'</span>), Step(<span class="st">'DiceRollFlow/1749762602890590/roll'</span>), Step(<span class="st">'DiceRollFlow/1749762602890590/start'</span>)]</span>
<span id="cb6-12"><a href=""></a><span class="op">&gt;&gt;&gt;</span> step <span class="op">=</span> <span class="bu">next</span>(run.steps())</span>
<span id="cb6-13"><a href=""></a><span class="op">&gt;&gt;&gt;</span> step.task.metadata</span>
<span id="cb6-14"><a href=""></a>[Metadata(name<span class="op">=</span><span class="st">'user'</span>, value<span class="op">=</span><span class="st">'daroczig'</span>, created_at<span class="op">=</span><span class="dv">1749762604068</span>, <span class="bu">type</span><span class="op">=</span><span class="st">'user'</span>, task<span class="op">=</span>Task(<span class="st">'DiceRollFlow/1749762602890590/end/3'</span>)), ...</span>
<span id="cb6-15"><a href=""></a><span class="op">&gt;&gt;&gt;</span> step.task.stdout</span>
<span id="cb6-16"><a href=""></a><span class="st">'Rolled 3 time(s) with a 10 sided dice: [5, 2, 2]</span><span class="ch">\n</span><span class="st">'</span></span>
<span id="cb6-17"><a href=""></a><span class="op">&gt;&gt;&gt;</span> step.task.artifacts.dices.data</span>
<span id="cb6-18"><a href=""></a>[<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">2</span>]</span></code></pre></div>
</section>
<section id="from-metaflow-import-more" class="slide level2" data-transition="slide-in fade-out">
<h2>&gt;&gt;&gt; from metaflow import more</h2>
<div class="columns" style="display: block; margin-top: 20px;">
<div class="column centered vcenter" style="width:30%;">
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    A[start] --&gt; B1(fitA)
    A[start] --&gt; B2(fitB)
    B1 --&gt; C[eval]
    B2 --&gt; C[eval]
    C --&gt; D[end]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div><div class="column vcenter" style="width:70%;">
<div class="sourceCode" id="cb7" style="font-size:24px; height: 525px; margin-top: 40px !important;" data-code-line-numbers="6,11,16,19"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb7-1"><a href=""></a><span class="kw">class</span> ModelingFlow(FlowSpec):</span>
<span id="cb7-2"><a href=""></a></span>
<span id="cb7-3"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb7-4"><a href=""></a>    <span class="kw">def</span> start(<span class="va">self</span>):</span>
<span id="cb7-5"><a href=""></a>        <span class="va">self</span>.data <span class="op">=</span> load_data()</span>
<span id="cb7-6"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.fitA, <span class="va">self</span>.fitB)</span>
<span id="cb7-7"><a href=""></a></span>
<span id="cb7-8"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb7-9"><a href=""></a>    <span class="kw">def</span> fitA(<span class="va">self</span>):</span>
<span id="cb7-10"><a href=""></a>        <span class="va">self</span>.model <span class="op">=</span> fit(<span class="va">self</span>.data, model<span class="op">=</span><span class="st">'A'</span>)</span>
<span id="cb7-11"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.<span class="bu">eval</span>)</span>
<span id="cb7-12"><a href=""></a></span>
<span id="cb7-13"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb7-14"><a href=""></a>    <span class="kw">def</span> fitB(<span class="va">self</span>):</span>
<span id="cb7-15"><a href=""></a>        <span class="va">self</span>.model <span class="op">=</span> fit(<span class="va">self</span>.data, model<span class="op">=</span><span class="st">'B'</span>)</span>
<span id="cb7-16"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.<span class="bu">eval</span>)</span>
<span id="cb7-17"><a href=""></a></span>
<span id="cb7-18"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb7-19"><a href=""></a>    <span class="kw">def</span> <span class="bu">eval</span>(<span class="va">self</span>, inputs):</span>
<span id="cb7-20"><a href=""></a>        <span class="va">self</span>.best <span class="op">=</span> <span class="bu">max</span>((i.model.score, i.model)</span>
<span id="cb7-21"><a href=""></a>                        <span class="cf">for</span> i <span class="kw">in</span> inputs)[<span class="dv">1</span>]</span>
<span id="cb7-22"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.end)</span>
<span id="cb7-23"><a href=""></a></span>
<span id="cb7-24"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb7-25"><a href=""></a>    <span class="kw">def</span> end(<span class="va">self</span>):</span>
<span id="cb7-26"><a href=""></a>        <span class="bu">print</span>(<span class="st">'done!'</span>)</span></code></pre></div>
</div></div>
<aside class="notes">

<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-metaflow-import-more-1" class="slide level2" data-transition="fade-in slide-out">
<h2>&gt;&gt;&gt; from metaflow import more</h2>
<div class="columns" style="display: block; margin-top: -63px;">
<div class="column centered vcenter" style="width:30%;">
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    A[start] -- data --&gt; B1(fitA)
    A[start] -- data --&gt; B2(fitB)
    B1 -. data&lt;br&gt;model .-&gt; C[eval]
    B2 -. data&lt;br&gt;model .-&gt; C[eval]
    C -- data&lt;br&gt;best --&gt; D[end]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div><div class="column vcenter" style="width:70%;">
<div class="sourceCode" id="cb8" style="font-size:24px; height: 525px; margin-top: 40px !important;" data-code-line-numbers="5,10,15,20-21"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb8-1"><a href=""></a><span class="kw">class</span> ModelingFlow(FlowSpec):</span>
<span id="cb8-2"><a href=""></a></span>
<span id="cb8-3"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb8-4"><a href=""></a>    <span class="kw">def</span> start(<span class="va">self</span>):</span>
<span id="cb8-5"><a href=""></a>        <span class="va">self</span>.data <span class="op">=</span> load_data()</span>
<span id="cb8-6"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.fitA, <span class="va">self</span>.fitB)</span>
<span id="cb8-7"><a href=""></a></span>
<span id="cb8-8"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb8-9"><a href=""></a>    <span class="kw">def</span> fitA(<span class="va">self</span>):</span>
<span id="cb8-10"><a href=""></a>        <span class="va">self</span>.model <span class="op">=</span> fit(<span class="va">self</span>.data, model<span class="op">=</span><span class="st">'A'</span>)</span>
<span id="cb8-11"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.<span class="bu">eval</span>)</span>
<span id="cb8-12"><a href=""></a></span>
<span id="cb8-13"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb8-14"><a href=""></a>    <span class="kw">def</span> fitB(<span class="va">self</span>):</span>
<span id="cb8-15"><a href=""></a>        <span class="va">self</span>.model <span class="op">=</span> fit(<span class="va">self</span>.data, model<span class="op">=</span><span class="st">'B'</span>)</span>
<span id="cb8-16"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.<span class="bu">eval</span>)</span>
<span id="cb8-17"><a href=""></a></span>
<span id="cb8-18"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb8-19"><a href=""></a>    <span class="kw">def</span> <span class="bu">eval</span>(<span class="va">self</span>, inputs):</span>
<span id="cb8-20"><a href=""></a>        <span class="va">self</span>.best <span class="op">=</span> <span class="bu">max</span>((i.model.score, i.model)</span>
<span id="cb8-21"><a href=""></a>                        <span class="cf">for</span> i <span class="kw">in</span> inputs)[<span class="dv">1</span>]</span>
<span id="cb8-22"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.end)</span>
<span id="cb8-23"><a href=""></a></span>
<span id="cb8-24"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb8-25"><a href=""></a>    <span class="kw">def</span> end(<span class="va">self</span>):</span>
<span id="cb8-26"><a href=""></a>        <span class="bu">print</span>(<span class="st">'done!'</span>)</span></code></pre></div>
</div></div>
<aside class="notes">

<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-metaflow-import-venv" class="slide level2">
<h2>&gt;&gt;&gt; from metaflow import venv</h2>
<div class="columns" style="display: block; margin-top: 20px;">
<div class="column centered vcenter" style="width:30%;">
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    style B2 fill:#eab308
    A[start] --&gt; B1(fitA)
    A[start] --&gt; B2(fitB)
    B1 --&gt; C[eval]
    B2 --&gt; C[eval]
    C --&gt; D[end]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div><div class="column vcenter" style="width:70%;">
<div class="sourceCode" id="cb9" style="font-size:24px; height: 545px; margin-top: 40px !important;" data-code-line-numbers="13"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb9-1"><a href=""></a><span class="kw">class</span> ModelingFlow(FlowSpec):</span>
<span id="cb9-2"><a href=""></a></span>
<span id="cb9-3"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb9-4"><a href=""></a>    <span class="kw">def</span> start(<span class="va">self</span>):</span>
<span id="cb9-5"><a href=""></a>        <span class="va">self</span>.data <span class="op">=</span> load_data()</span>
<span id="cb9-6"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.fitA, <span class="va">self</span>.fitB)</span>
<span id="cb9-7"><a href=""></a></span>
<span id="cb9-8"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb9-9"><a href=""></a>    <span class="kw">def</span> fitA(<span class="va">self</span>):</span>
<span id="cb9-10"><a href=""></a>        <span class="va">self</span>.model <span class="op">=</span> fit(<span class="va">self</span>.data, model<span class="op">=</span><span class="st">'A'</span>)</span>
<span id="cb9-11"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.<span class="bu">eval</span>)</span>
<span id="cb9-12"><a href=""></a></span>
<span id="cb9-13"><a href=""></a>    <span class="at">@pypi</span>(python<span class="op">=</span><span class="st">'3.10.11'</span>, packages<span class="op">=</span>{<span class="st">'scikit-learn'</span>: <span class="st">'1.7'</span>})</span>
<span id="cb9-14"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb9-15"><a href=""></a>    <span class="kw">def</span> fitB(<span class="va">self</span>):</span>
<span id="cb9-16"><a href=""></a>        <span class="va">self</span>.model <span class="op">=</span> fit(<span class="va">self</span>.data, model<span class="op">=</span><span class="st">'B'</span>)</span>
<span id="cb9-17"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.<span class="bu">eval</span>)</span>
<span id="cb9-18"><a href=""></a></span>
<span id="cb9-19"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb9-20"><a href=""></a>    <span class="kw">def</span> <span class="bu">eval</span>(<span class="va">self</span>, inputs):</span>
<span id="cb9-21"><a href=""></a>        <span class="va">self</span>.best <span class="op">=</span> <span class="bu">max</span>((i.model.score, i.model)</span>
<span id="cb9-22"><a href=""></a>                        <span class="cf">for</span> i <span class="kw">in</span> inputs)[<span class="dv">1</span>]</span>
<span id="cb9-23"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.end)</span>
<span id="cb9-24"><a href=""></a></span>
<span id="cb9-25"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb9-26"><a href=""></a>    <span class="kw">def</span> end(<span class="va">self</span>):</span>
<span id="cb9-27"><a href=""></a>        <span class="bu">print</span>(<span class="st">'done!'</span>)</span></code></pre></div>
</div></div>
<aside class="notes">

<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-metaflow-import-cloud" class="slide level2" data-transition="slide-in convex-out">
<h2>&gt;&gt;&gt; from metaflow import cloud</h2>
<div class="columns" style="display: block; margin-top: 20px;">
<div class="column centered vcenter" style="width:30%;">
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    subgraph AWS Batch
      B1(fitA)
      B2(fitB)
    end
    A[start] .-&gt; B1
    A[start] .-&gt; B2
    B1 .-&gt; C[eval]
    B2 .-&gt; C[eval]
    C --&gt; D[end]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div><div class="column vcenter" style="width:70%;">
<div class="sourceCode" id="cb10" style="font-size:24px; height: 565px; margin-top: 40px !important;" data-code-line-numbers="8,14"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb10-1"><a href=""></a><span class="kw">class</span> ModelingFlow(FlowSpec):</span>
<span id="cb10-2"><a href=""></a></span>
<span id="cb10-3"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb10-4"><a href=""></a>    <span class="kw">def</span> start(<span class="va">self</span>):</span>
<span id="cb10-5"><a href=""></a>        <span class="va">self</span>.data <span class="op">=</span> load_data()</span>
<span id="cb10-6"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.fitA, <span class="va">self</span>.fitB)</span>
<span id="cb10-7"><a href=""></a></span>
<span id="cb10-8"><a href=""></a>    <span class="at">@batch</span>(cpu<span class="op">=</span><span class="dv">32</span>, memory<span class="op">=</span><span class="dv">64</span>)</span>
<span id="cb10-9"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb10-10"><a href=""></a>    <span class="kw">def</span> fitA(<span class="va">self</span>):</span>
<span id="cb10-11"><a href=""></a>        <span class="va">self</span>.model <span class="op">=</span> fit(<span class="va">self</span>.data, model<span class="op">=</span><span class="st">'A'</span>)</span>
<span id="cb10-12"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.<span class="bu">eval</span>)</span>
<span id="cb10-13"><a href=""></a></span>
<span id="cb10-14"><a href=""></a>    <span class="at">@batch</span>(cpu<span class="op">=</span><span class="dv">4</span>, memory<span class="op">=</span><span class="dv">16</span>, gpu<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb10-15"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb10-16"><a href=""></a>    <span class="kw">def</span> fitB(<span class="va">self</span>):</span>
<span id="cb10-17"><a href=""></a>        <span class="va">self</span>.model <span class="op">=</span> fit(<span class="va">self</span>.data, model<span class="op">=</span><span class="st">'B'</span>)</span>
<span id="cb10-18"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.<span class="bu">eval</span>)</span>
<span id="cb10-19"><a href=""></a></span>
<span id="cb10-20"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb10-21"><a href=""></a>    <span class="kw">def</span> <span class="bu">eval</span>(<span class="va">self</span>, inputs):</span>
<span id="cb10-22"><a href=""></a>        <span class="va">self</span>.best <span class="op">=</span> <span class="bu">max</span>((i.model.score, i.model)</span>
<span id="cb10-23"><a href=""></a>                        <span class="cf">for</span> i <span class="kw">in</span> inputs)[<span class="dv">1</span>]</span>
<span id="cb10-24"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.end)</span>
<span id="cb10-25"><a href=""></a></span>
<span id="cb10-26"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb10-27"><a href=""></a>    <span class="kw">def</span> end(<span class="va">self</span>):</span>
<span id="cb10-28"><a href=""></a>        <span class="bu">print</span>(<span class="st">'done!'</span>)</span></code></pre></div>
</div></div>
<aside class="notes">
<p>But how much resources did we actually use?</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="import-resource_tracker" class="title-slide slide level1" data-transition="convex-in slide-out">
<h1>&gt;&gt;&gt; import resource_tracker</h1>
<ul>
<li class="fragment" data-fragment-index="1">
Lightweight (zero-dependency*) Python package
</li>
<li class="fragment" data-fragment-index="3">
Supports Python 3.9+
</li>
<li class="fragment" data-fragment-index="4">
Monitors system-level and process-level resource usage
</li>
<li class="fragment" data-fragment-index="5">
Tracks CPU, memory, GPU/VRAM, network, storage &amp; more
</li>
<li class="fragment" data-fragment-index="6">
Ease of use, minimal setup, non-blocking
</li>
<li class="fragment" data-fragment-index="7">
Runs in the background, non-blocking
</li>
<li class="fragment" data-fragment-index="8">
Framework extensions (e.g.&nbsp;Metaflow)
</li>
<div class="fragment" style="margin-top: 40px;" data-fragment-index="2">
* No dependencies on Linux; <code>psutil</code> on other OS.
</div>
</ul></section>
<section id="import-resource_tracker-1" class="slide level2">
<h2>&gt;&gt;&gt; import resource_tracker</h2>
<p>Install from PyPI: <img style="float:right; height: 30px;" src="https://camo.githubusercontent.com/6c79d35aff64a703207a83f650249e71ea2ace0ab4c81295b07a862cdeb96733/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f7265736f757263652d747261636b65723f636f6c6f723d253233333243393535"></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install resource-tracker</span></code></pre></div>
<div class="fragment">
<p>Minimal example:</p>
<div class="sourceCode" id="cb12" data-code-line-numbers="1|3|8-9|5"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb12-1"><a href=""></a><span class="im">from</span> resource_tracker <span class="im">import</span> ResourceTracker</span>
<span id="cb12-2"><a href=""></a></span>
<span id="cb12-3"><a href=""></a>tracker <span class="op">=</span> ResourceTracker()</span>
<span id="cb12-4"><a href=""></a><span class="co"># your compute-heavy code</span></span>
<span id="cb12-5"><a href=""></a>tracker.stop()</span>
<span id="cb12-6"><a href=""></a></span>
<span id="cb12-7"><a href=""></a><span class="co"># your analytics code utilizing the collected data</span></span>
<span id="cb12-8"><a href=""></a>tracker.pid_tracker</span>
<span id="cb12-9"><a href=""></a>tracker.system_tracker</span></code></pre></div>
</div>
</section>
<section id="from-resource_tracker-import-resourcetracker" class="slide level2" style="font-size:39px !important;">
<h2>&gt;&gt;&gt; from resource_tracker import ResourceTracker</h2>
<div class="sourceCode" id="cb13" style="font-size:38px; margin-top: 20px !important; height: 640px;" data-code-line-numbers="1-5|6-8|9-12|13-16|19-20"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb13-1"><a href=""></a><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> time <span class="im">import</span> sleep</span>
<span id="cb13-2"><a href=""></a><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> resource_tracker <span class="im">import</span> ResourceTracker</span>
<span id="cb13-3"><a href=""></a><span class="op">&gt;&gt;&gt;</span> tracker <span class="op">=</span> ResourceTracker()</span>
<span id="cb13-4"><a href=""></a><span class="op">&gt;&gt;&gt;</span> tracker.pid_tracker</span>
<span id="cb13-5"><a href=""></a>TinyDataFrame <span class="cf">with</span> <span class="dv">0</span> rows <span class="kw">and</span> <span class="dv">0</span> columns. First row <span class="im">as</span> a <span class="bu">dict</span>: {}</span>
<span id="cb13-6"><a href=""></a><span class="op">&gt;&gt;&gt;</span> sleep(<span class="dv">1</span>)</span>
<span id="cb13-7"><a href=""></a><span class="op">&gt;&gt;&gt;</span> tracker.pid_tracker</span>
<span id="cb13-8"><a href=""></a>TinyDataFrame <span class="cf">with</span> <span class="dv">1</span> rows <span class="kw">and</span> <span class="dv">12</span> columns. First row <span class="im">as</span> a <span class="bu">dict</span>: {<span class="st">'timestamp'</span>: <span class="fl">1750021603.0219927</span>, <span class="st">'pid'</span>: <span class="fl">265803.0</span>, <span class="st">'children'</span>: <span class="fl">3.0</span>, <span class="st">'utime'</span>: <span class="fl">0.05999999999999997</span>, <span class="st">'stime'</span>: <span class="fl">0.1</span>, <span class="st">'cpu_usage'</span>: <span class="fl">0.16</span>, <span class="st">'memory'</span>: <span class="fl">62343.0</span>, <span class="st">'read_bytes'</span>: <span class="fl">0.0</span>, <span class="st">'write_bytes'</span>: <span class="fl">0.0</span>, <span class="st">'gpu_usage'</span>: <span class="fl">0.0</span>, <span class="st">'gpu_vram'</span>: <span class="fl">0.0</span>, <span class="st">'gpu_utilized'</span>: <span class="fl">0.0</span>}</span>
<span id="cb13-9"><a href=""></a><span class="op">&gt;&gt;&gt;</span> big_array <span class="op">=</span> <span class="bu">bytearray</span>(<span class="dv">500</span> <span class="op">*</span> <span class="dv">1024</span> <span class="op">*</span> <span class="dv">1024</span>)  <span class="co"># 500 MiB</span></span>
<span id="cb13-10"><a href=""></a><span class="op">&gt;&gt;&gt;</span> total <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb13-11"><a href=""></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">int</span>(<span class="fl">1e7</span>)):</span>
<span id="cb13-12"><a href=""></a>...     total <span class="op">+=</span> i<span class="op">**</span><span class="dv">3</span></span>
<span id="cb13-13"><a href=""></a><span class="op">&gt;&gt;&gt;</span> tracker.pid_tracker.tail(<span class="dv">1</span>)</span>
<span id="cb13-14"><a href=""></a>{<span class="st">'timestamp'</span>: <span class="fl">1750022019.3893294</span>, <span class="st">'pid'</span>: <span class="fl">265803.0</span>, <span class="st">'children'</span>: <span class="fl">3.0</span>, <span class="st">'utime'</span>: <span class="fl">1.0299999999999994</span>, <span class="st">'stime'</span>: <span class="fl">0.06999999999999984</span>, <span class="st">'cpu_usage'</span>: <span class="fl">1.0999</span>, <span class="st">'memory'</span>: <span class="fl">573832.0</span>, <span class="st">'read_bytes'</span>: <span class="fl">0.0</span>, <span class="st">'write_bytes'</span>: <span class="fl">0.0</span>, <span class="st">'gpu_usage'</span>: <span class="fl">0.0</span>, <span class="st">'gpu_vram'</span>: <span class="fl">0.0</span>, <span class="st">'gpu_utilized'</span>: <span class="fl">0.0</span>}</span>
<span id="cb13-15"><a href=""></a><span class="op">&gt;&gt;&gt;</span> tracker.system_tracker.tail(<span class="dv">1</span>)</span>
<span id="cb13-16"><a href=""></a>{<span class="st">'timestamp'</span>: <span class="fl">1750022019.3464136</span>, <span class="st">'processes'</span>: <span class="fl">778.0</span>, <span class="st">'utime'</span>: <span class="fl">2.139999999999418</span>, <span class="st">'stime'</span>: <span class="fl">2.60999999998603</span>, <span class="st">'cpu_usage'</span>: <span class="fl">4.7495</span>, <span class="st">'memory_free'</span>: <span class="fl">18372680.0</span>, <span class="st">'memory_used'</span>: <span class="fl">37015416.0</span>, <span class="st">'memory_buffers'</span>: <span class="fl">3612.0</span>, <span class="st">'memory_cached'</span>: <span class="fl">10155400.0</span>, <span class="st">'memory_active'</span>: <span class="fl">29048656.0</span>, <span class="st">'memory_inactive'</span>: <span class="fl">130048.0</span>, <span class="st">'disk_read_bytes'</span>: <span class="fl">95047680.0</span>, <span class="st">'disk_write_bytes'</span>: <span class="fl">7380992.0</span>, <span class="st">'disk_space_total_gb'</span>: <span class="fl">3699.99</span>, <span class="st">'disk_space_used_gb'</span>: <span class="fl">2373.84</span>, <span class="st">'disk_space_free_gb'</span>: <span class="fl">1326.15</span>, <span class="st">'net_recv_bytes'</span>: <span class="fl">8960.0</span>, <span class="st">'net_sent_bytes'</span>: <span class="fl">4732.0</span>, <span class="st">'gpu_usage'</span>: <span class="fl">0.3</span>, <span class="st">'gpu_vram'</span>: <span class="fl">791.0</span>, <span class="st">'gpu_utilized'</span>: <span class="fl">1.0</span>}</span>
<span id="cb13-17"><a href=""></a><span class="op">&gt;&gt;&gt;</span> tracker.system_tracker</span>
<span id="cb13-18"><a href=""></a>TinyDataFrame <span class="cf">with</span> <span class="dv">4</span> rows <span class="kw">and</span> <span class="dv">21</span> columns. First row <span class="im">as</span> a <span class="bu">dict</span>: {<span class="st">'timestamp'</span>: <span class="fl">1750022016.3461385</span>, <span class="st">'processes'</span>: <span class="fl">778.0</span>, <span class="st">'utime'</span>: <span class="fl">0.6399999999994179</span>, <span class="st">'stime'</span>: <span class="fl">1.6000000000058208</span>, <span class="st">'cpu_usage'</span>: <span class="fl">2.2398</span>, <span class="st">'memory_free'</span>: <span class="fl">18415448.0</span>, <span class="st">'memory_used'</span>: <span class="fl">36966424.0</span>, <span class="st">'memory_buffers'</span>: <span class="fl">3612.0</span>, <span class="st">'memory_cached'</span>: <span class="fl">10161624.0</span>, <span class="st">'memory_active'</span>: <span class="fl">28951856.0</span>, <span class="st">'memory_inactive'</span>: <span class="fl">130048.0</span>, <span class="st">'disk_read_bytes'</span>: <span class="fl">126976.0</span>, <span class="st">'disk_write_bytes'</span>: <span class="fl">827392.0</span>, <span class="st">'disk_space_total_gb'</span>: <span class="fl">3699.99</span>, <span class="st">'disk_space_used_gb'</span>: <span class="fl">2373.84</span>, <span class="st">'disk_space_free_gb'</span>: <span class="fl">1326.15</span>, <span class="st">'net_recv_bytes'</span>: <span class="fl">9896.0</span>, <span class="st">'net_sent_bytes'</span>: <span class="fl">9101.0</span>, <span class="st">'gpu_usage'</span>: <span class="fl">0.31</span>, <span class="st">'gpu_vram'</span>: <span class="fl">799.0</span>, <span class="st">'gpu_utilized'</span>: <span class="fl">1.0</span>}</span>
<span id="cb13-19"><a href=""></a><span class="op">&gt;&gt;&gt;</span> <span class="kw">del</span> big_array</span>
<span id="cb13-20"><a href=""></a><span class="op">&gt;&gt;&gt;</span> tracker.stop()</span></code></pre></div>
</section>
<section id="from-resource_tracker-import-resourcetracker-1" class="slide level2" style="font-size:39px !important;">
<h2>&gt;&gt;&gt; from resource_tracker import ResourceTracker</h2>
<div class="sourceCode" id="cb14" style="font-size:38px; margin-top: 40px !important;" data-code-line-numbers="|6|7-9"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb14-1"><a href=""></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(tracker.pid_tracker)</span>
<span id="cb14-2"><a href=""></a>TinyDataFrame <span class="cf">with</span> <span class="dv">7</span> rows <span class="kw">and</span> <span class="dv">12</span> columns:</span>
<span id="cb14-3"><a href=""></a>timestamp          <span class="op">|</span> pid      <span class="op">|</span> children <span class="op">|</span> utime <span class="op">|</span> stime <span class="op">|</span> cpu_usage <span class="op">|</span> memory   <span class="op">|</span> read_bytes <span class="op">|</span> write_bytes <span class="op">|</span> gpu_usage <span class="op">|</span> gpu_vram <span class="op">|</span> gpu_utilized</span>
<span id="cb14-4"><a href=""></a><span class="op">-------------------+----------+----------+-------+-------+-----------+----------+------------+-------------+-----------+----------+-------------</span></span>
<span id="cb14-5"><a href=""></a> <span class="fl">1750022710.052515</span> <span class="op">|</span> <span class="fl">326380.0</span> <span class="op">|</span>      <span class="fl">3.0</span> <span class="op">|</span> <span class="fl">0.040</span> <span class="op">|</span> <span class="fl">0.069</span> <span class="op">|</span>      <span class="fl">0.11</span> <span class="op">|</span>  <span class="fl">62017.0</span> <span class="op">|</span>        <span class="fl">0.0</span> <span class="op">|</span>         <span class="fl">0.0</span> <span class="op">|</span>       <span class="fl">0.0</span> <span class="op">|</span>      <span class="fl">0.0</span> <span class="op">|</span>          <span class="fl">0.0</span></span>
<span id="cb14-6"><a href=""></a><span class="fl">1750022711.0526254</span> <span class="op">|</span> <span class="fl">326380.0</span> <span class="op">|</span>      <span class="fl">3.0</span> <span class="op">|</span> <span class="fl">0.139</span> <span class="op">|</span> <span class="fl">0.099</span> <span class="op">|</span>      <span class="fl">0.24</span> <span class="op">|</span> <span class="fl">573959.0</span> <span class="op">|</span>        <span class="fl">0.0</span> <span class="op">|</span>         <span class="fl">0.0</span> <span class="op">|</span>       <span class="fl">0.0</span> <span class="op">|</span>      <span class="fl">0.0</span> <span class="op">|</span>          <span class="fl">0.0</span></span>
<span id="cb14-7"><a href=""></a>  <span class="fl">1750022712.05273</span> <span class="op">|</span> <span class="fl">326380.0</span> <span class="op">|</span>      <span class="fl">3.0</span> <span class="op">|</span> <span class="fl">1.020</span> <span class="op">|</span> <span class="fl">0.072</span> <span class="op">|</span>    <span class="fl">1.0899</span> <span class="op">|</span> <span class="fl">573913.0</span> <span class="op">|</span>        <span class="fl">0.0</span> <span class="op">|</span>         <span class="fl">0.0</span> <span class="op">|</span>       <span class="fl">0.0</span> <span class="op">|</span>      <span class="fl">0.0</span> <span class="op">|</span>          <span class="fl">0.0</span></span>
<span id="cb14-8"><a href=""></a><span class="fl">1750022713.0528054</span> <span class="op">|</span> <span class="fl">326380.0</span> <span class="op">|</span>      <span class="fl">3.0</span> <span class="op">|</span> <span class="fl">1.029</span> <span class="op">|</span> <span class="fl">0.090</span> <span class="op">|</span>    <span class="fl">1.1199</span> <span class="op">|</span> <span class="fl">573968.0</span> <span class="op">|</span>        <span class="fl">0.0</span> <span class="op">|</span>         <span class="fl">0.0</span> <span class="op">|</span>       <span class="fl">0.0</span> <span class="op">|</span>      <span class="fl">0.0</span> <span class="op">|</span>          <span class="fl">0.0</span></span>
<span id="cb14-9"><a href=""></a> <span class="fl">1750022714.052872</span> <span class="op">|</span> <span class="fl">326380.0</span> <span class="op">|</span>      <span class="fl">3.0</span> <span class="op">|</span> <span class="fl">1.010</span> <span class="op">|</span> <span class="fl">0.099</span> <span class="op">|</span>    <span class="fl">1.1099</span> <span class="op">|</span> <span class="fl">573923.0</span> <span class="op">|</span>        <span class="fl">0.0</span> <span class="op">|</span>         <span class="fl">0.0</span> <span class="op">|</span>       <span class="fl">0.0</span> <span class="op">|</span>      <span class="fl">0.0</span> <span class="op">|</span>          <span class="fl">0.0</span></span>
<span id="cb14-10"><a href=""></a><span class="fl">1750022715.0529463</span> <span class="op">|</span> <span class="fl">326380.0</span> <span class="op">|</span>      <span class="fl">3.0</span> <span class="op">|</span> <span class="fl">0.049</span> <span class="op">|</span> <span class="fl">0.079</span> <span class="op">|</span>      <span class="fl">0.13</span> <span class="op">|</span>  <span class="fl">71775.0</span> <span class="op">|</span>        <span class="fl">0.0</span> <span class="op">|</span>         <span class="fl">0.0</span> <span class="op">|</span>       <span class="fl">0.0</span> <span class="op">|</span>      <span class="fl">0.0</span> <span class="op">|</span>          <span class="fl">0.0</span></span>
<span id="cb14-11"><a href=""></a><span class="fl">1750022716.0530148</span> <span class="op">|</span> <span class="fl">326380.0</span> <span class="op">|</span>      <span class="fl">3.0</span> <span class="op">|</span> <span class="fl">0.060</span> <span class="op">|</span> <span class="fl">0.099</span> <span class="op">|</span>      <span class="fl">0.16</span> <span class="op">|</span>  <span class="fl">61954.0</span> <span class="op">|</span>        <span class="fl">0.0</span> <span class="op">|</span>         <span class="fl">0.0</span> <span class="op">|</span>       <span class="fl">0.0</span> <span class="op">|</span>      <span class="fl">0.0</span> <span class="op">|</span>          <span class="fl">0.0</span></span></code></pre></div>
<div class="fragment">
<div class="sourceCode" id="cb15" style="font-size:38px; margin-top: 40px !important;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">sum</span>(tracker.pid_tracker[<span class="st">"utime"</span>]) <span class="op">/</span> <span class="bu">len</span>(tracker.pid_tracker[<span class="st">"utime"</span>])</span>
<span id="cb15-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fl">0.4785714285714286</span></span>
<span id="cb15-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">max</span>(tracker.pid_tracker[<span class="st">"memory"</span>]) <span class="op">/</span> <span class="dv">1024</span></span>
<span id="cb15-4"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fl">560.515625</span></span></code></pre></div>
</div>
</section>
<section id="from-resource_tracker-import-pidtracker-systemtracker" class="slide level2" style="font-size:39px !important;">
<h2>&gt;&gt;&gt; from resource_tracker import PidTracker, SystemTracker</h2>
<ul>
<li>Track process and/or system-level resource usage</li>
<li>Configure to monitor subprocesses</li>
<li>Configure sampling interval</li>
<li>Use <code>PidTracker</code> and <code>SystemTracker</code> directly (blocking)</li>
</ul>
<p>Learn more by reading the documentation at<br> üìñ <a href="https://sparecores.github.io/resource-tracker/reference/resource_tracker/tracker/" target="_new">sparecores.github.io/resource-tracker</a></p>
<aside class="notes">

<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="from-metaflow-import-track_resources" class="title-slide slide level1 smaller-font-header" data-transition="convex-in slide-out">
<h1>&gt;&gt;&gt; from metaflow import track_resources</h1>
<div class="sourceCode" id="cb16" style="font-size:30px; margin-top: 20px !important; height: 630px !important;" data-code-line-numbers="|2,9"><pre class="sourceCode numberSource python number-lines"><code class="sourceCode python"><span id="cb16-1"><a href=""></a><span class="im">from</span> time <span class="im">import</span> sleep</span>
<span id="cb16-2"><a href=""></a><span class="im">from</span> metaflow <span class="im">import</span> FlowSpec, step, track_resources</span>
<span id="cb16-3"><a href=""></a></span>
<span id="cb16-4"><a href=""></a><span class="kw">class</span> MinimalFlow(FlowSpec):</span>
<span id="cb16-5"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb16-6"><a href=""></a>    <span class="kw">def</span> start(<span class="va">self</span>):</span>
<span id="cb16-7"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.do_heavy_computation)</span>
<span id="cb16-8"><a href=""></a></span>
<span id="cb16-9"><a href=""></a>    <span class="at">@track_resources</span></span>
<span id="cb16-10"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb16-11"><a href=""></a>    <span class="kw">def</span> do_heavy_computation(<span class="va">self</span>):</span>
<span id="cb16-12"><a href=""></a>        big_array <span class="op">=</span> <span class="bu">bytearray</span>(<span class="dv">500</span> <span class="op">*</span> <span class="dv">1024</span> <span class="op">*</span> <span class="dv">1024</span>)  <span class="co"># 500 MiB</span></span>
<span id="cb16-13"><a href=""></a>        total <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb16-14"><a href=""></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">int</span>(<span class="fl">1e7</span>)):</span>
<span id="cb16-15"><a href=""></a>            total <span class="op">+=</span> i<span class="op">**</span><span class="dv">3</span>  <span class="co"># heavy calcs</span></span>
<span id="cb16-16"><a href=""></a>        <span class="kw">del</span> big_array</span>
<span id="cb16-17"><a href=""></a>        sleep(<span class="dv">1</span>)  <span class="co"># do nothing for bit after releasing memory</span></span>
<span id="cb16-18"><a href=""></a>        <span class="va">self</span>.<span class="bu">next</span>(<span class="va">self</span>.end)</span>
<span id="cb16-19"><a href=""></a></span>
<span id="cb16-20"><a href=""></a>    <span class="at">@step</span></span>
<span id="cb16-21"><a href=""></a>    <span class="kw">def</span> end(<span class="va">self</span>):</span>
<span id="cb16-22"><a href=""></a>        <span class="cf">pass</span></span>
<span id="cb16-23"><a href=""></a></span>
<span id="cb16-24"><a href=""></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb16-25"><a href=""></a>    MinimalFlow()</span></code></pre></div>
<aside class="notes">
<p>my talk could have been this single slide</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-metaflow-import-track_resources-1" class="slide level2">
<h2>&gt;&gt;&gt; from metaflow import track_resources</h2>
<p><a href="/assets/slides/budapest-ml-2025_files/1-minimal-card.html" target="_blank"> <img src="images/metaflow-minimal-card-preview.png" style="margin-top: -60px; width: 100%;"> </a></p>
</section>
<section id="from-metaflow-import-track_resources-2" class="slide level2">
<h2>&gt;&gt;&gt; from metaflow import track_resources</h2>
<p><a href="/assets/slides/example-resource-tracker-report-in-metaflow.html" target="_blank"> <img src="images/metaflow-cloud-server-card-preview.png" style="margin-top: -60px; width: 100%;"> </a></p>
</section>
<section id="from-metaflow-import-track_resources-3" class="slide level2">
<h2>&gt;&gt;&gt; from metaflow import track_resources</h2>
<ul>
<li class="fragment">
Host hardware specs and environment information
</li>
<li class="fragment">
Cloud provider, region and instance type discovery
</li>
<li class="fragment">
Tracks CPU, memory, disk I/O and storage, network, GPU/VRAM, and more
</li>
<li class="fragment">
Summary statistics
</li>
<li class="fragment">
Resource recommendations
</li>
<li class="fragment">
Actual cloud server type recommendation with real-time (spot or on-demand) pricing information
</li>
<li class="fragment">
Easy to use (single decorator) üòä
</li>
</ul>
</section>
<section id="from-metaflow-import-track_resources-4" class="slide level2">
<h2>&gt;&gt;&gt; from metaflow import track_resources</h2>
<div class="centered" style="margin-top: 40px;">
<video autoplay="" loop="" muted="" style="width: 80%;" src="/assets/slides/images/demo_time.webm"></video>
<p style="margin-top: 0px;">
Source: <a href="https://thecodinglove.com/when-we-demo-our-prototype-to-the-client"> When we demo our prototype to the client </a>
</p>
</div>
<aside class="notes">

<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="from-metaflow-import-track_resources-5" class="slide level2">
<h2>&gt;&gt;&gt; from metaflow import track_resources</h2>
<div class="centered">
<a href="https://docs.outerbounds.com/sandbox/" target="_blank"> <img src="images/outerbounds-sandbox.png" style="margin-top: 0px; width: 65%;"> </a>
<p style="margin-top: 0px;">
Source: <a href="https://docs.outerbounds.com/sandbox/" target="_blank">Outerbounds sandbox</a>
</p>
</div>
<aside class="notes">
<ol type="1">
<li>start sandbox</li>
<li>edit ‚Äúscaling out to the cloud‚Äù: import + add track_resources</li>
<li>pip install resource-tracker</li>
<li>run the flow .. check cards</li>
<li>realize low memory usage despite asking for 10 gigs!</li>
<li>by default, <code>@kubernetes</code> would reserve 4 GiB</li>
</ol>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section id="future" class="title-slide slide level1" data-transition="convex-in convex-out">
<h1>&gt;&gt;&gt; import __future__</h1>
<ul>
<li class="fragment">
Automated <code><span class="citation" data-cites="resources">@resources</span></code> tuning
</li>
<li class="fragment">
More granular resource mapping
</li>
<li class="fragment">
Step optimization assistant
</li>
<li class="fragment">
Central dashboard for all resource usage
</li>
<li class="fragment">
Proactive resource management
</li>
<ul>
<li class="fragment">
Email alerts on overprovisioning
</li>
<li class="fragment">
Predict potential job failures due to insufficient resources
</li>
</ul>
<li class="fragment">
Effortless remote execution
</li>
</ul>
<aside class="notes">

<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>

<section>
<section id="team" class="title-slide slide level1" data-transition="convex-in none-out">
<h1>&gt;&gt;&gt; from sparecores import team</h1>
<div class="colcontainer mt-60 centered">
<div class="col">
<img src="https://avatars.githubusercontent.com/u/820331?v=4" class="rounded w-70">
<p class="bold mt-0">
<span class="citation" data-cites="bra-fsn">@bra-fsn</span>
</p>
</div>
<div class="col">
<img src="https://avatars.githubusercontent.com/u/5794264?v=4" class="rounded w-70">
<p class="bold mt-0">
<span class="citation" data-cites="palabola">@palabola</span>
</p>
</div>
<div class="col">
<img src="https://avatars.githubusercontent.com/u/495736?v=4" class="rounded w-70">
<p class="bold mt-0">
<span class="citation" data-cites="daroczig">@daroczig</span>
</p>
</div>
</div>
<aside class="notes">
<p>TODO</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="team-annotations" class="slide level2" data-transition="none-in convex-out">
<h2>&gt;&gt;&gt; from sparecores import team</h2>
<div class="colcontainer mt-60 centered">
<div class="col">
<img src="https://avatars.githubusercontent.com/u/820331?v=4" class="rounded w-70">
<p class="bold mt-0">
<span class="citation" data-cites="bra-fsn">@bra-fsn</span>
</p>
<p class="mt-0" style="font-size: 0.9em; white-space: normal;">
Infrastructure and Python veteran.
</p>
</div>
<div class="col">
<img src="https://avatars.githubusercontent.com/u/5794264?v=4" class="rounded w-70">
<p class="bold mt-0">
<span class="citation" data-cites="palabola">@palabola</span>
</p>
<p class="mt-0" style="font-size: 0.9em; white-space: normal;">
Guardian of the front-end and Node.js tools.
</p>
</div>
<div class="col">
<img src="https://avatars.githubusercontent.com/u/495736?v=4" class="rounded w-70">
<p class="bold mt-0">
<span class="citation" data-cites="daroczig">@daroczig</span>
</p>
<p class="mt-0" style="font-size: 0.9em; white-space: normal;">
Hack of all trades, master of <code>NaN</code>.
</p>
</div>
</div>
<aside class="notes">
<p>TODO</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="bye" class="title-slide slide level1" data-transition="convex-in none-out">
<h1></h1>
<!-- https://carbon.now.sh/?bg=rgba%288%2C47%2C73%2C1%29&t=nord&wt=none&l=r&width=680&ds=false&dsyoff=20px&dsblur=68px&wc=true&wa=true&pv=56px&ph=56px&ln=false&fl=1&fm=Hack&fs=18px&lh=161%25&si=false&es=2x&wm=false&code=%253E%2520q%28save%2520%253D%2520%27ask%27%29%250AProcess%2520finished%2520at%2520June%252012%252009%253A50%253A00%25202024%2520%250A%250A%253E%2520visit%28%27https%253A%252F%252Fsparecores.com%27%29%250A%253E%2520email%28%27daroczig%2540sparecores.com%27%29%250A%253E%2520follow%28%27%2540SpareCores%27%29 -->
<!-- https://carbon.now.sh/?bg=rgba%288%2C47%2C73%2C1%29&t=nord&wt=none&l=python&width=680&ds=false&dsyoff=20px&dsblur=68px&wc=true&wa=true&pv=5px&ph=5px&ln=false&fl=1&fm=Hack&fs=18px&lh=161%25&si=false&es=2x&wm=false&code=%253E%253E%253E%2520import%2520os%250A%253E%253E%253E%2520import%2520signal%250A%253E%253E%253E%2520os.kill%28os.getpid%28%29%252C%2520signal.SIGKILL%29%2520%2520%250A%250A%253E%253E%253E%2520visit%28%27https%253A%252F%252Fsparecores.com%27%29%250A%253E%253E%253E%2520email%28%27daroczig%2540sparecores.com%27%29%250A%253E%253E%253E%2520follow%28%27%2540SpareCores%27%29%250A%250A%253E%253E%253E%2520os._exit%28status%253D0%29%250AProcess%2520finished%2520at%2520June%252012%252009%253A50%253A00%25202024%2520 -->
<!-- https://carbon.now.sh/?bg=rgba%288%2C47%2C73%2C1%29&t=theme%3A0bcewbfyk9yl&wt=none&l=python&width=680&ds=false&dsyoff=20px&dsblur=68px&wc=true&wa=true&pv=5px&ph=5px&ln=false&fl=1&fm=Hack&fs=18px&lh=161%25&si=false&es=2x&wm=false&code=%253E%253E%253E%2520import%2520os%250A%253E%253E%253E%2520import%2520signal%250A%253E%253E%253E%2520os.kill%28os.getpid%28%29%252C%2520signal.SIGKILL%29%2520%2520%250A%250A%253E%253E%253E%2520visit%28%27https%253A%252F%252Fsparecores.com%27%29%250A%253E%253E%253E%2520email%28%27daroczig%2540sparecores.com%27%29%250A%253E%253E%253E%2520follow%28%27%2540SpareCores%27%29%250A%250A%253E%253E%253E%2520os._exit%28status%253D0%29%250AProcess%2520finished%2520at%2520June%252012%252009%253A50%253A00%25202024%2520 -->
<div class="centered">
<p><img src="images/bye-1.png" style="background: none;" class="mt--60 w-80"></p>
</div>
</section>
<section id="bye-bye" class="slide level2" data-transition="none">
<h2></h2>
<div class="centered">
<p><img src="images/bye-2.png" style="background: none;" class="mt--60 w-80"></p>
</div>
</section>
<section id="bye-bye-bye" class="slide level2" data-transition="none">
<h2></h2>
<div class="centered">
<p><img src="images/by-budapest-ml-forum-3.png" style="background: none;" class="mt--60 w-80"></p>
</div>
<p class="author offlineMode" style="color:#eee;font-size:0.75em;text-align: center !important; margin-top:-30px; padding-top:0px;">
Slides: <a href="https://sparecores.com/talks" target="_blank">sparecores.com/talks</a>
</p>
<!--toggle visibility of items in live mode-->
<script>
var url = document.location.href;
if (url.match("/?live")) {
  const elements = document.getElementsByClassName('offlineMode');
  for (let i = 0; i < elements.length; i++) {
    element = elements.item(i);
    element.style.display = 'none';
  }
} else {
  const elements = document.getElementsByClassName('onlineMode');
  for (let i = 0; i < elements.length; i++) {
    element = elements.item(i);
    element.style.display = 'none';
  }
}
</script>

</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="images/sc-square-dark-300x300.jpg" class="slide-logo"></p>
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="budapest-ml-2025_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="budapest-ml-2025_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="budapest-ml-2025_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="budapest-ml-2025_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="budapest-ml-2025_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="budapest-ml-2025_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="budapest-ml-2025_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="budapest-ml-2025_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="budapest-ml-2025_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="budapest-ml-2025_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': false,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":false},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'h.v',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1150,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>